<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Onion Crop Intelligence</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
--bg-light:#fffaf0;
--bg-dark:#1a1a1a;
--card-light:#ffffff;
--card-dark:#2a2a2a;
--primary:#9c6644;
--secondary:#d68c45;
--accent:#ffd166;
--text-light:#5c4033;
--text-dark:#f0f0f0;
--shadow:0 8px 25px rgba(0,0,0,0.08);
}

body{
margin:0;
font-family:'Poppins',sans-serif;
background:var(--bg-light);
color:var(--text-light);
transition:0.5s;
scroll-behavior:smooth;
}

/* DARK MODE */
body.dark{
background:var(--bg-dark);
color:var(--text-dark);
}

/* HEADER */
header{
padding:25px;
text-align:center;
box-shadow:var(--shadow);
background:linear-gradient(90deg,var(--primary),var(--secondary));
color:white;
position:relative;
}

h1{
margin:0;
font-size:32px;
}

.subtitle{
opacity:0.9;
margin-top:5px;
font-weight:400;
}

/* TOGGLE BUTTON */
.toggle-btn{
position:absolute;
top:20px;
right:20px;
background:var(--accent);
border:none;
border-radius:20px;
padding:8px 16px;
color:white;
font-weight:600;
cursor:pointer;
transition:0.3s;
}
.toggle-btn:hover{
background:#e6ac00;
}

/* SECTION */
.section{
padding:40px 10%;
}

/* CARD */
.card{
background:var(--card-light);
padding:25px;
border-radius:20px;
margin-bottom:30px;
box-shadow:var(--shadow);
transition:0.4s;
}

body.dark .card{
background:var(--card-dark);
}

.card:hover{
transform:translateY(-5px);
box-shadow:0 15px 40px rgba(0,0,0,0.5);
}

/* INPUT & BUTTONS */
input{
padding:12px;
margin:6px;
border-radius:8px;
border:1px solid #f5d7b2;
width:180px;
font-size:14px;
}
body.dark input{border:1px solid #555; background:#333; color:white;}

button{
padding:12px 25px;
background:var(--accent);
color:white;
border:none;
border-radius:8px;
cursor:pointer;
font-weight:600;
margin-top:10px;
transition:0.3s;
}

button:hover{
background:#e6ac00;
}

/* SCORE CIRCLE */
.score-circle{
width:160px;
height:160px;
border-radius:50%;
background:conic-gradient(var(--secondary) 0deg,#e0e0e0 0deg);
display:flex;
align-items:center;
justify-content:center;
margin:20px auto;
font-size:28px;
font-weight:bold;
color:var(--primary);
box-shadow:var(--shadow);
transition:0.5s;
}

/* PROGRESS BAR */
.progress-bar{
height:12px;
background:#e0e0e0;
border-radius:10px;
overflow:hidden;
margin-top:15px;
}
body.dark .progress-bar{background:#555;}

.progress{
height:100%;
width:0%;
background:var(--secondary);
transition:1s;
}

/* ALERT */
.alert{
margin-top:15px;
font-weight:600;
font-size:16px;
}

/* CHART */
#graphCard{
padding:20px;
}

/* FOOTER */
footer{
background:var(--primary);
color:white;
padding:25px;
text-align:center;
margin-top:40px;
}
/* ===== MOBILE RESPONSIVE ===== */
@media(max-width:768px){

    /* Stack sidebar on top */
    body{
        flex-direction:column;
    }

    .sidebar{
        width:100%;
        height:auto;
        position:relative;
        padding-top:20px;
    }

    .sidebar h2{
        font-size:20px;
        margin-bottom:20px;
    }

    .sidebar a{
        padding:12px 15px;
        font-size:14px;
    }

    /* Main content full width */
    .main{
        margin-left:0;
        padding:15px;
    }

    /* Stack crop cards vertically */
    .crop-container{
        flex-direction:column;
        gap:15px;
    }

    .crop-link{
        min-width:100%;
    }

    /* Adjust chat panel for smaller screens */
    #chatPanel{
        width:90%;
        bottom:80px;
        right:5%;
        max-height:70vh;
        padding:10px;
    }

    .chat-box{
        height:200px; /* smaller height on mobile */
    }

    .chat-input input{
        font-size:13px;
        padding:8px;
    }

    .chat-input button{
        padding:8px 10px;
        font-size:13px;
    }

    /* Floating chat button smaller on mobile */
    #chatButton{
        width:50px;
        height:50px;
        font-size:24px;
        bottom:15px;
        right:15px;
    }

    /* Cards smaller padding */
    .card{
        padding:15px;
    }
}
/* MEDIA */
@media(max-width:768px){
.section{padding:30px 5%;}
input{width:100%;}
}
</style>
</head>
<body>

<header>
<h1>üßÖ Smart Onion Crop Intelligence</h1>
<p class="subtitle">AI + Sensor Based Field Monitoring | Nashik Region</p>
<button class="toggle-btn" onclick="toggleMode()">üåô Dark/Light</button>
</header>

<div class="section">

<!-- SENSOR INPUT -->
<div class="card">
<h2>üå¶ Live Field Monitoring</h2>
<input type="number" id="humidity" placeholder="Humidity (%)">
<input type="number" id="temperature" placeholder="Temperature (¬∞C)">
<input type="number" id="soil" placeholder="Soil Moisture (%)">
<br>
<button onclick="analyze()">Run AI Prediction</button>
<div id="alert" class="alert"></div>
</div>

<!-- AI SCORE -->
<div class="card">
<h2>ü§ñ Crop Health Score</h2>
<div class="score-circle" id="scoreCircle">0%</div>
<p id="result" style="text-align:center;font-weight:600;"></p>
<div class="progress-bar">
<div class="progress" id="progress"></div>
</div>
</div>

<!-- STAGE ADVISORY -->
<div class="card">
<h2>üå± Growth Stage Advisory</h2>
<p id="stageInfo">Enter field data to receive smart advisory.</p>
</div>

<!-- REAL-TIME GRAPH -->
<div class="card" id="graphCard">
<h2>üìä Growth Trend (Simulated)</h2>
<canvas id="growthChart" height="200"></canvas>
</div>

<!-- IMAGE -->
<div class="card">
<h2>üßÖ Onion Field</h2>
<img src="https://tse4.mm.bing.net/th/id/OIP.RJDoRUvoRf7EWN8h0CpGSQHaFj?rs=1&pid=ImgDetMain&o=7&rm=3" alt="Onion Field" style="width:100%; border-radius:15px; box-shadow:0 10px 25px rgba(0,0,0,0.3);">
</div>

</div>

<footer>
AI Powered Onion Advisory System | Climate Smart Agriculture üåç
</footer>

<script>
// DARK/LIGHT TOGGLE
function toggleMode(){
document.body.classList.toggle("dark");
}

// AI ANALYSIS
function analyze(){
let h=parseInt(document.getElementById("humidity").value);
let t=parseInt(document.getElementById("temperature").value);
let s=parseInt(document.getElementById("soil").value);

let score=100;
let alertBox=document.getElementById("alert");

// Risk assessment for onion
if(h>85){ score-=20; alertBox.innerHTML="‚ö† High Humidity ‚Üí Downy Mildew Risk"; alertBox.style.color="orange"; }
else if(t>36){ score-=25; alertBox.innerHTML="üî• Heat Stress Alert"; alertBox.style.color="red"; }
else if(s<30){ score-=20; alertBox.innerHTML="üíß Low Soil Moisture"; alertBox.style.color="blue"; }
else{ alertBox.innerHTML="‚úÖ Field Conditions Normal"; alertBox.style.color="green"; }

if(score<0) score=0;

// Update Score Circle
document.getElementById("scoreCircle").innerText=score+"%";
document.getElementById("scoreCircle").style.background="conic-gradient(#d68c45 "+(score*3.6)+"deg,#e0e0e0 0deg)";
document.getElementById("progress").style.width=score+"%";

// Onion growth stages & advisory
let stage="", advisory="";
if(t<25){ stage="üå± Germination & Seedling (Week 1‚Äì3)"; advisory="Proper seed bed | Adequate soil moisture | Fungicide if required"; }
else if(t>=25 && t<=30){ stage="üåø Vegetative Growth (Week 4‚Äì6)"; advisory="Apply NPK fertilizer | Monitor Thrips & Leaf Miner | Irrigation control"; }
else if(t>30 && t<=35){ stage="üå∏ Bulbing Stage (Week 7‚Äì10)"; advisory="Balanced irrigation | Potassium feeding | Monitor Downy Mildew"; }
else{ stage="üßÖ Maturation & Harvest (Week 11‚Äì14)"; advisory="Reduce irrigation before harvest | Monitor pests | Prepare for harvesting"; }

document.getElementById("stageInfo").innerHTML="<b>"+stage+"</b><br><br>"+advisory;

// Update chart dynamically
addChartData(score);
}

// CHART.JS - Real-time simulation
const ctx = document.getElementById('growthChart').getContext('2d');
const growthChart = new Chart(ctx, {
type:'line',
data:{
labels:['Week1','Week2','Week3','Week4','Week5','Week6'],
datasets:[{
label:'Crop Health Score',
data:[0,0,0,0,0,0],
borderColor:'#d68c45',
backgroundColor:'rgba(214,140,69,0.2)',
tension:0.4,
fill:true,
}]
},
options:{
responsive:true,
plugins:{legend:{display:true}},
scales:{y:{beginAtZero:true, max:100}}
}
});

function addChartData(score){
let data=growthChart.data.datasets[0].data;
data.push(score);
if(data.length>6) data.shift();
growthChart.update();
}
</script>
</body>
</html>
